!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=72)}([function(t,e,s){const i=s(15),n=s(16),r=s(17),c=s(18),a=t=>JSON.parse(JSON.stringify(t));t.exports=class{constructor(t){this.client=t.client,this.schemaVersion=t.schemaVersion||"2019-03-20T00:00:00.000Z",this.lang=t.lang,this.apiKey=t.apiKey,this.fetch=t.fetch,this.caches=t.caches,this.debug=t.debug,this.baseUrl="https://api.guildwars2.com",this.isPaginated=!1,this.maxPageSize=200,this.isBulk=!1,this.supportsBulkAll=!0,this.isLocalized=!1,this.isAuthenticated=!1,this.isOptionallyAuthenticated=!1,this.credentials=!1,this._skipCache=!1}schema(t){return this.schemaVersion=t,this.debugMessage(`set the schema to ${t}`),this}_schemaIncludes(t){return this.schemaVersion>=t}language(t){return this.lang=t,this.debugMessage(`set the language to ${t}`),this}authenticate(t){return this.apiKey=t,this.debugMessage(`set the api key to ${t}`),this}debugging(t){return this.debug=t,this}debugMessage(t){this.debug&&console.log(`[gw2api-client] ${t}`)}live(){return this._skipCache=!0,this.debugMessage("skipping cache"),this}ids(){if(this.debugMessage(`ids(${this.url}) called`),!this.isBulk)return Promise.reject(new Error('"ids" is only available for bulk expanding endpoints'));if(!this.cacheTime)return this._ids();const t=this._cacheHash("ids"),e=e=>e?(this.debugMessage(`ids(${this.url}) resolving from cache`),e):this._ids().then(e=>(this._cacheSetSingle(t,e),e));return(this._skipCache?Promise.resolve(!1).then(e):this._cacheGetSingle(t).then(e)).then(a)}_ids(){return this.debugMessage(`ids(${this.url}) requesting from api`),this._request(this.url)}get(t,e=!1){if(this.debugMessage(`get(${this.url}) called`),!t&&this.isBulk&&!e)return Promise.reject(new Error('"get" requires an id'));if(!this.cacheTime)return this._get(t,e);const s=this._cacheHash(t),i=i=>i?(this.debugMessage(`get(${this.url}) resolving from cache`),i):this._get(t,e).then(t=>(this._cacheSetSingle(s,t),t));return(this._skipCache?Promise.resolve(!1).then(i):this._cacheGetSingle(s).then(i)).then(a)}_get(t,e){return this.debugMessage(`get(${this.url}) requesting from api`),this.isBulk&&!e?this._request(`${this.url}?id=${t}`):e?this._request(this.url+t):this._request(this.url)}many(t){if(this.debugMessage(`many(${this.url}) called (${t.length} ids)`),!this.isBulk)return Promise.reject(new Error('"many" is only available for bulk expanding endpoints'));if(0===t.length)return Promise.resolve([]);if(t=n.immutable(t),!this.cacheTime)return this._many(t);const e=t.map(t=>this._cacheHash(t)),s=e=>{if((e=e.filter(t=>t)).length===t.length)return this.debugMessage(`many(${this.url}) resolving fully from cache`),e;this.debugMessage(`many(${this.url}) resolving partially from cache (${e.length} ids)`);const s=i(t,e);return this._many(s,e.length>0).then(s=>{const i=s.map(t=>[this._cacheHash(t.id),t]);return this._cacheSetMany(i),s=s.concat(e),this._sortByIdList(s,t)})},i=(t,e)=>{const s={};return e.map(t=>{s[t.id]=1}),t.filter(t=>1!==s[t])};return(this._skipCache?Promise.resolve([]).then(s):this._cacheGetMany(e).then(s)).then(a)}_many(t,e=!1){this.debugMessage(`many(${this.url}) requesting from api (${t.length} ids)`);const s=r(t,this.maxPageSize).map(t=>`${this.url}?ids=${t.join(",")}`);return this._requestMany(s).then(t=>t.reduce((t,e)=>t.concat(e),[])).catch(t=>e&&t.response&&404===t.response.status?Promise.resolve([]):Promise.reject(t))}page(t,e=this.maxPageSize){if(this.debugMessage(`page(${this.url}) called`),!this.isBulk&&!this.isPaginated)return Promise.reject(new Error('"page" is only available for bulk expanding or paginated endpoints'));if(e>this.maxPageSize||e<=0)return Promise.reject(new Error(`"size" has to be between 0 and ${this.maxPageSize}, was ${e}`));if(t<0)return Promise.reject(new Error("page has to be 0 or greater"));if(!this.cacheTime)return this._page(t,e);const s=this._cacheHash("page-"+t+"/"+e),i=i=>i?(this.debugMessage(`page(${this.url}) resolving from cache`),i):this._page(t,e).then(t=>{let e=[[s,t]];return this.isBulk&&(e=e.concat(t.map(t=>[this._cacheHash(t.id),t]))),this._cacheSetMany(e),t});return(this._skipCache?Promise.resolve(!1).then(i):this._cacheGetSingle(s).then(i)).then(a)}_page(t,e){return this.debugMessage(`page(${this.url}) requesting from api`),this._request(`${this.url}?page=${t}&page_size=${e}`)}all(){if(this.debugMessage(`all(${this.url}) called`),!this.isBulk&&!this.isPaginated)return Promise.reject(new Error('"all" is only available for bulk expanding or paginated endpoints'));if(!this.cacheTime)return this._all();const t=this._cacheHash("all"),e=e=>e?(this.debugMessage(`all(${this.url}) resolving from cache`),e):this._all().then(e=>{let s=[[t,e]];return this.isBulk&&(s=s.concat(e.map(t=>[this._cacheHash(t.id),t]))),this._cacheSetMany(s),e});return(this._skipCache?Promise.resolve(!1).then(e):this._cacheGetSingle(t).then(e)).then(a)}_all(){if(this.debugMessage(`all(${this.url}) requesting from api`),this.isBulk&&this.supportsBulkAll)return this._request(`${this.url}?ids=all`);let t;return this._request(`${this.url}?page=0&page_size=${this.maxPageSize}`,"response").then(e=>(t=e.headers.get("X-Result-Total"),e.json())).then(e=>{if(t<=this.maxPageSize)return e;let s=[];for(let e=1;e<Math.ceil(t/this.maxPageSize);e++)s.push(`${this.url}?page=${e}&page_size=${this.maxPageSize}`);return this._requestMany(s).then(t=>(t=t.reduce((t,e)=>t.concat(e),[]),e.concat(t)))})}_cacheSetSingle(t,e){this.caches.map(s=>s.set(t,e,this.cacheTime))}_cacheSetMany(t){t=t.map(t=>[t[0],t[1],this.cacheTime]),this.caches.map(e=>e.mset(t))}_cacheGetSingle(t,e=0){return this.caches[e].get(t).then(s=>s||e===this.caches.length-1?s:this._cacheGetSingle(t,++e))}_cacheGetMany(t,e=0){return this.caches[e].mget(t).then(s=>{if(s.filter(t=>t).length===t.length||e===this.caches.length-1)return s;let i=s.map((e,s)=>!e&&t[s]).filter(t=>t);return this._cacheGetMany(i,++e).then(t=>{let e=0;return s.map(s=>s||t[e++])})})}_cacheHash(t){let e=c(this.baseUrl+this.url+":"+this.schemaVersion);return t&&(e+=":"+t),this.isLocalized&&(e+=":"+this.lang),this._usesApiKey()&&(e+=":"+c(this.apiKey+"")),e}_request(t,e="json"){t=this._buildUrl(t);const s=this.credentials?"include":void 0;return this.fetch.single(t,{type:e,credentials:s})}_requestMany(t,e="json"){t=t.map(t=>this._buildUrl(t));const s=this.credentials?"include":void 0;return this.fetch.many(t,{type:e,credentials:s})}_buildUrl(t){const e=(t=this.baseUrl+t).split("?");let s=i.parse(e[1]||""),n={};return n.v=this.schemaVersion,this._usesApiKey()&&(n.access_token=this.apiKey),this.isLocalized&&(n.lang=this.lang),n=Object.assign(n,s),n=i.stringify(n,!0).replace(/%2C/g,","),e[0]+n}_sortByIdList(t,e){let s={};return e.map((t,e)=>{s[t]=e}),t.sort((t,e)=>s[t.id]-s[e.id]),t}_usesApiKey(){return this.isAuthenticated&&(!this.isOptionallyAuthenticated||this.apiKey)}}},function(t,e,s){"use strict";e.a=class extends class{initialize(t,e){this._terminal=t,this._api=e}get commandName(){throw new TypeError("commandName needs to be implemented by derivatives")}execute(){return this._execute()}_execute(){throw new TypeError("_execute needs to be implemented by derivatives")}}{get commandName(){throw new TypeError("commandName needs to be implemented by derivatives")}execute(){return async function(t){try{return await t}catch(t){throw t.content?t.content.text?`Error ${t.response.status}: ${t.content.text}.`:`Error ${t.response.status}`:t}}(this._execute())}}},function(t,e,s){const i=s(8);t.exports=function(){return new i}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super(t),this.name=e,this.url="/v2/characters",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isAuthenticated=!0,this.cacheTime=300}backstory(){return new n(this,this.name)}core(){return new r(this,this.name)}crafting(){return new c(this,this.name)}equipment(){return new a(this,this.name)}heropoints(){return new o(this,this.name)}inventory(){return new u(this,this.name)}quests(){return new h(this,this.name)}recipes(){return new l(this,this.name)}sab(){return new d(this,this.name)}skills(){return new p(this,this.name)}specializations(){return new m(this,this.name)}training(){return new g(this,this.name)}};class n extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/backstory`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.backstory)}}class r extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/core`,this.isAuthenticated=!0,this.cacheTime=300}}class c extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/crafting`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.crafting)}}class a extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/equipment`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.equipment)}}class o extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/heropoints`,this.isAuthenticated=!0,this.cacheTime=300}}class u extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/inventory`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.bags)}}class h extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/quests`,this.isAuthenticated=!0,this.cacheTime=300}}class l extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/recipes`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.recipes)}}class d extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/sab`,this.isAuthenticated=!0,this.cacheTime=300}}class p extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/skills`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.skills)}}class m extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/specializations`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.specializations)}}class g extends i{constructor(t,e){super(t),this.url=`/v2/characters/${encodeURIComponent(e)}/training`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.training)}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super(t),this.fromAccount=e}amulets(){return new r(this)}games(){return new c(this)}heroes(){return this.fromAccount?new n(this):new a(this)}ranks(){return new o(this)}seasons(t){return new u(this,t)}standings(){return new d(this)}stats(){return new p(this)}};class n extends i{constructor(t){super(t),this.url="/v2/account/pvp/heroes",this.isAuthenticated=!0,this.cacheTime=300}}class r extends i{constructor(t){super(t),this.url="/v2/pvp/amulets",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class c extends i{constructor(t){super(t),this.url="/v2/pvp/games",this.isPaginated=!0,this.isBulk=!0,this.isAuthenticated=!0,this.cacheTime=300}}class a extends i{constructor(t){super(t),this.url="/v2/pvp/heroes",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class o extends i{constructor(t){super(t),this.url="/v2/pvp/ranks",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class u extends i{constructor(t,e){super(t),this.id=e,this.url="/v2/pvp/seasons",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}leaderboards(){return new h(this,this.id)}}class h extends i{constructor(t,e){super(t),this.id=e,this.url=`/v2/pvp/seasons/${e}/leaderboards`,this.cacheTime=86400}ids(){return super.get("",!0)}board(t,e){return new l(this,this.id,t,e)}}class l extends i{constructor(t,e,s,i){super(t),this.url=`/v2/pvp/seasons/${e}/leaderboards/${s}/${i}`,this.isPaginated=!0,this.cacheTime=300}}class d extends i{constructor(t){super(t),this.url="/v2/pvp/standings",this.isAuthenticated=!0,this.cacheTime=300}}class p extends i{constructor(t){super(t),this.url="/v2/pvp/stats",this.isAuthenticated=!0,this.cacheTime=300}}},function(t,e,s){const i=s(0);t.exports=class extends i{delivery(){return new n(this)}exchange(){return new r(this)}listings(){return new c(this)}prices(){return new a(this)}transactions(){return{current:()=>({buys:()=>new o(this,"current","buys"),sells:()=>new o(this,"current","sells")}),history:()=>({buys:()=>new o(this,"history","buys"),sells:()=>new o(this,"history","sells")})}}};class n extends i{constructor(t){super(t),this.url="/v2/commerce/delivery",this.isAuthenticated=!0,this.cacheTime=300}}class r extends i{constructor(t){super(t),this.url="/v2/commerce/exchange",this.cacheTime=600}gems(t){return super.get(`/gems?quantity=${t}`,!0)}coins(t){return super.get(`/coins?quantity=${t}`,!0)}}class c extends i{constructor(t){super(t),this.url="/v2/commerce/listings",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.cacheTime=120}}class a extends i{constructor(t){super(t),this.url="/v2/commerce/prices",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.cacheTime=60}}class o extends i{constructor(t,e,s){super(t),this.url=`/v2/commerce/transactions/${e}/${s}`,this.isPaginated=!0,this.isAuthenticated=!0,this.cacheTime=600}}},function(t,e){t.exports={parallel:async function(t){const e=await Promise.all(Object.values(t).map(t=>t()));if(Array.isArray(t))return e;const s=Object.keys(t);return e.reduce((t,e,i)=>(t[s[i]]=e,t),{})}}},function(t,e,s){!function(e,s){var i=i||function(t,e){if(t){var s={welcome:"",prompt:"",separator:"&gt;",theme:"interlaced"};(e=e||s).welcome=e.welcome||s.welcome,e.prompt=e.prompt||s.prompt,e.separator=e.separator||s.separator,e.theme=e.theme||s.theme;var i=Array.prototype.slice.call(arguments,2),n=localStorage.history?JSON.parse(localStorage.history):[],r=n.length,c="",a=document.getElementById(t);a.classList.add("terminal"),a.classList.add("terminal-"+e.theme),a.insertAdjacentHTML("beforeEnd",['<div class="background"><div class="interlace"></div></div>','<div class="container">',"<output></output>",'<table class="input-line">','<tr><td nowrap><div class="prompt">'+e.prompt+e.separator+'</div></td><td width="100%"><input class="cmdline" spellcheck="false" autofocus /></td></tr>',"</table>","</div>"].join(""));var o=a.querySelector(".container"),u=o.querySelector(".input-line"),h=o.querySelector(".input-line .cmdline"),l=o.querySelector("output"),d=o.querySelector(".prompt"),p=document.querySelector(".background");return l.addEventListener("DOMSubtreeModified",function(t){setTimeout(function(){h.scrollIntoView()},0)},!1),e.welcome&&v(e.welcome),window.addEventListener("click",function(t){h.focus()},!1),l.addEventListener("click",function(t){t.stopPropagation()},!1),h.addEventListener("click",m,!1),u.addEventListener("click",function(t){h.focus()},!1),h.addEventListener("keyup",g,!1),h.addEventListener("keydown",f,!1),window.addEventListener("keyup",function(t){h.focus(),t.stopPropagation(),t.preventDefault()},!1),{clear:w,write:v,writeLine:y,setPrompt:function(t){d.innerHTML=t+e.separator},getPrompt:function(){return d.innerHTML.replace(new RegExp(e.separator+"$"),"")},setTheme:function(t){a.classList.remove("terminal-"+e.theme),e.theme=t,a.classList.add("terminal-"+e.theme)},getTheme:function(){return e.theme}}}function m(t){this.value=this.value}function g(t){27==t.keyCode&&(this.value="",t.stopPropagation(),t.preventDefault()),!n.length||38!=t.keyCode&&40!=t.keyCode||(n[r]?n[r]=this.value:c=this.value,38==t.keyCode?--r<0&&(r=0):40==t.keyCode&&++r>n.length&&(r=n.length),this.value=n[r]?n[r]:c,this.value=this.value)}async function f(t){if(13==t.keyCode){var e=this.value;e&&(n[n.length]=e,localStorage.history=JSON.stringify(n),r=n.length);var s=this.parentNode.parentNode.parentNode.parentNode.cloneNode(!0);s.removeAttribute("id"),s.classList.add("line");var c=s.querySelector("input.cmdline");if(c.autofocus=!1,c.readOnly=!0,c.insertAdjacentHTML("beforebegin",c.value),c.parentNode.removeChild(c),l.appendChild(s),u.classList.add("hidden"),this.value="",e&&e.trim()){var a=e.split(" ").filter(function(t,e){return t}),o=a[0];a=a.splice(1)}if(o){var h=!1;for(var d in i){var p=i[d];if(p.execute&&(h=p.execute(o,a)),h&&h.then&&(h=await h),!1!==h)break}!1===h&&(h=o+": command not found"),v(h)}u.classList.remove("hidden")}}function w(){l.innerHTML="",h.value="",p.style.minHeight=""}function v(t){l.insertAdjacentHTML("beforeEnd",t),h.scrollIntoView()}function y(t){v(`${t||""}<br/>`)}};if(t.exports)t.exports=i;else{var n=e.Terminal;i.noConflict=function(){return e.Terminal=n,i},e.Terminal=i}}(this)},function(t,e,s){const i=s(9),n=s(12),r=s(13),c=s(6);t.exports=class{constructor(){this.schemaVersion="2019-03-20T00:00:00.000Z",this.lang="en",this.apiKey=!1,this.fetch=i,this.caches=[n()],this.debug=!1,this.client=this}schema(t){return this.schemaVersion=t,this.debugMessage(`set the schema to ${t}`),this}language(t){return this.lang=t,this.debugMessage(`set the language to ${t}`),this}authenticate(t){return this.apiKey=t,this.debugMessage(`set the api key to ${t}`),this}cacheStorage(t){return this.caches=[].concat(t),this.debugMessage("updated the cache storage"),this}debugging(t){return this.debug=t,this}debugMessage(t){this.debug&&console.log(`[gw2api-client] ${t}`)}flushCacheIfGameUpdated(){const t=this.build(),e={cacheBuildId:()=>t._cacheGetSingle("cacheBuildId"),buildId:()=>t.live().get()};return c.parallel(e).then(e=>{let s=[];return e.cacheBuildId&&e.cacheBuildId<e.buildId&&(this.debugMessage("flushing the cache because of a new build"),s=this.caches.map(t=>()=>t.flush())),c.parallel(s).then(()=>t._cacheSetSingle("cacheBuildId",e.buildId))})}account(){return new r.AccountEndpoint(this)}achievements(){return new r.AchievementsEndpoint(this)}backstory(){return new r.BackstoryEndpoint(this)}build(){return new r.BuildEndpoint(this)}cats(){return new r.CatsEndpoint(this)}characters(t){return new r.CharactersEndpoint(this,t)}colors(){return new r.ColorsEndpoint(this)}commerce(){return new r.CommerceEndpoint(this)}continents(){return new r.ContinentsEndpoint(this)}currencies(){return new r.CurrenciesEndpoint(this)}dailycrafting(){return new r.DailycraftingEndpoint(this)}dungeons(){return new r.DungeonsEndpoint(this)}emblem(){return new r.EmblemEndpoint(this)}events(){return new r.EventsEndpoint(this)}files(){return new r.FilesEndpoint(this)}finishers(){return new r.FinishersEndpoint(this)}gliders(){return new r.GlidersEndpoint(this)}guild(t){return new r.GuildEndpoint(this,t)}home(){return new r.HomeEndpoint(this)}items(){return new r.ItemsEndpoint(this)}itemstats(){return new r.ItemstatsEndpoint(this)}legends(){return new r.LegendsEndpoint(this)}mailcarriers(){return new r.MailcarriersEndpoint(this)}mapchests(){return new r.MapchestsEndpoint(this)}maps(){return new r.MapsEndpoint(this)}masteries(){return new r.MasteriesEndpoint(this)}materials(){return new r.MaterialsEndpoint(this)}minis(){return new r.MinisEndpoint(this)}mounts(){return new r.MountsEndpoint(this)}nodes(){return new r.NodesEndpoint(this)}novelties(){return new r.NoveltiesEndpoint(this)}outfits(){return new r.OutfitsEndpoint(this)}pets(){return new r.PetsEndpoint(this)}professions(){return new r.ProfessionsEndpoint(this)}pvp(){return new r.PvpEndpoint(this)}quaggans(){return new r.QuaggansEndpoint(this)}quests(){return new r.QuestsEndpoint(this)}races(){return new r.RacesEndpoint(this)}raids(){return new r.RaidsEndpoint(this)}recipes(){return new r.RecipesEndpoint(this)}skills(){return new r.SkillsEndpoint(this)}skins(){return new r.SkinsEndpoint(this)}specializations(){return new r.SpecializationsEndpoint(this)}stories(){return new r.StoriesEndpoint(this)}titles(){return new r.TitlesEndpoint(this)}tokeninfo(){return new r.TokeninfoEndpoint(this)}traits(){return new r.TraitsEndpoint(this)}worldbosses(){return new r.WorldbossesEndpoint(this)}worlds(){return new r.WorldsEndpoint(this)}wvw(){return new r.WvwEndpoint(this)}}},function(t,e,s){const i=s(10),n=s(11),r={type:"json",method:"GET",headers:{},body:void 0};let c=()=>!1,a=()=>!1;function o(t,e={}){let s=1;const n=()=>(function(t,e){let s,n;return e=Object.assign({},r,e),new Promise((r,c)=>{i(t,e).then(function(t){switch(n=t,e.type){case"response":return t;case"json":return t.json();default:return t.text()}}).then(function(t){if(n&&n.status>=400)throw s=t,new Error("Response status indicates error");r(t)}).catch(function(t){n&&n.status>=400&&(t=new Error(`Status ${n.status}`));let e=new Error(t.message);e.response=n,e.content=s,c(e)})})})(t,e).catch(t=>{if(c(++s,t))return u(n,a(s));throw t});return n()}function u(t,e){return new Promise(s=>{setTimeout(()=>s(t()),e||0)})}t.exports={retry:function(t){c=t},retryWait:function(t){a=t},single:o,many:function(t,e={}){let s=e.waitTime?n.series:n.parallel;let i=t.map(t=>()=>(t=>o(t,e).then(t=>u(()=>t,e.waitTime)))(t));return s(i)}}},function(t,e,s){"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();t.exports=e=i.fetch,e.default=i.fetch.bind(i),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response},function(t,e){t.exports={series:async function(t){let e=[];for(let s=0;s!==t.length;s++)e.push(await t[s]());return e},parallel:function(t){return Promise.all(t.map(t=>t()))}}},function(t,e){function s(){return Promise.resolve(null)}function i(){return Promise.resolve(!0)}function n(t){const e=t.map(t=>null);return Promise.resolve(e)}function r(){return Promise.resolve(!0)}function c(){return Promise.resolve(!0)}t.exports=function(){return{get:s,set:i,mget:n,mset:r,flush:c}}},function(t,e,s){t.exports={AccountEndpoint:s(14),AchievementsEndpoint:s(23),BackstoryEndpoint:s(24),BuildEndpoint:s(25),CatsEndpoint:s(26),CharactersEndpoint:s(3),ColorsEndpoint:s(27),CommerceEndpoint:s(5),ContinentsEndpoint:s(28),CurrenciesEndpoint:s(29),DailycraftingEndpoint:s(30),DungeonsEndpoint:s(31),EmblemEndpoint:s(32),EventsEndpoint:s(33),FilesEndpoint:s(34),FinishersEndpoint:s(35),GlidersEndpoint:s(36),GuildEndpoint:s(37),HomeEndpoint:s(38),ItemsEndpoint:s(39),ItemstatsEndpoint:s(40),LegendsEndpoint:s(41),MailcarriersEndpoint:s(42),MapchestsEndpoint:s(43),MapsEndpoint:s(44),MasteriesEndpoint:s(45),MaterialsEndpoint:s(46),MinisEndpoint:s(47),MountsEndpoint:s(48),NodesEndpoint:s(49),NoveltiesEndpoint:s(50),OutfitsEndpoint:s(51),PetsEndpoint:s(52),ProfessionsEndpoint:s(53),PvpEndpoint:s(4),QuaggansEndpoint:s(54),QuestsEndpoint:s(55),RacesEndpoint:s(56),RaidsEndpoint:s(57),RecipesEndpoint:s(58),SkillsEndpoint:s(59),SkinsEndpoint:s(60),SpecializationsEndpoint:s(61),StoriesEndpoint:s(62),TitlesEndpoint:s(63),TokeninfoEndpoint:s(64),TraitsEndpoint:s(65),WorldbossesEndpoint:s(66),WorldsEndpoint:s(67),WvwEndpoint:s(68)}},function(t,e,s){const i=s(0),n=s(3),r=s(4),c=s(5),a=s(20),o=s(22);class u extends i{constructor(t){super(t),this.url="/v2/account",this.isAuthenticated=!0,this.cacheTime=300}achievements(){return new h(this)}bank(){return new l(this)}characters(t){return new n(this,t)}dailycrafting(){return new d(this)}delivery(){return new c(this).delivery()}dungeons(){return new p(this)}dyes(){return new m(this)}finishers(){return new g(this)}gliders(){return new f(this)}home(){return{cats:()=>new w(this),nodes:()=>new v(this)}}inventory(){return new y(this)}luck(){return new x(this)}mailcarriers(){return new k(this)}masteries(){return new T(this)}mapchests(){return new b(this)}mastery(){return{points:()=>new $(this)}}materials(){return new P(this)}minis(){return new E(this)}mounts(){return{skins:()=>new A(this),types:()=>new _(this)}}novelties(){return new B(this)}outfits(){return new L(this)}pvp(){return new r(this,!0)}raids(){return new S(this)}recipes(){return new M(this)}skins(){return new z(this)}titles(){return new C(this)}transactions(){return new c(this).transactions()}wallet(){return new I(this)}worldbosses(){return new j(this)}blob(){return a(this)}}class h extends i{constructor(t){super(t),this.url="/v2/account/achievements",this.isAuthenticated=!0,this.isPaginated=!0,this.isBulk=!0,this.cacheTime=300}ids(){return Promise.reject(new Error("method not supported for this endpoint"))}get(t){return t?super.get(t):this.all()}all(){return super.get("",!0)}}class l extends i{constructor(t){super(t),this.url="/v2/account/bank",this.isAuthenticated=!0,this.cacheTime=300}}class d extends i{constructor(t){super(t),this.url="/v2/account/dailycrafting",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await q(this)?[]:super.get()}}class p extends i{constructor(t){super(t),this.url="/v2/account/dungeons",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await q(this)?[]:super.get()}}class m extends i{constructor(t){super(t),this.url="/v2/account/dyes",this.isAuthenticated=!0,this.cacheTime=300}}class g extends i{constructor(t){super(t),this.url="/v2/account/finishers",this.isAuthenticated=!0,this.cacheTime=300}}class f extends i{constructor(t){super(t),this.url="/v2/account/gliders",this.isAuthenticated=!0,this.cacheTime=300}}class w extends i{constructor(t){super(t),this.url="/v2/account/home/cats",this.isAuthenticated=!0,this.cacheTime=300}}class v extends i{constructor(t){super(t),this.url="/v2/account/home/nodes",this.isAuthenticated=!0,this.cacheTime=300}}class y extends i{constructor(t){super(t),this.url="/v2/account/inventory",this.isAuthenticated=!0,this.cacheTime=300}}class x extends i{constructor(t){super(t),this.url="/v2/account/luck",this.isAuthenticated=!0,this.cacheTime=300}async get(){const t=await super.get();return 0===t.length?0:t[0].value}}class k extends i{constructor(t){super(t),this.url="/v2/account/mailcarriers",this.isAuthenticated=!0,this.cacheTime=300}}class b extends i{constructor(t){super(t),this.url="/v2/account/mapchests",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await q(this)?[]:super.get()}}class T extends i{constructor(t){super(t),this.url="/v2/account/masteries",this.isAuthenticated=!0,this.cacheTime=300}}class $ extends i{constructor(t){super(t),this.url="/v2/account/mastery/points",this.isAuthenticated=!0,this.cacheTime=300}}class P extends i{constructor(t){super(t),this.url="/v2/account/materials",this.isAuthenticated=!0,this.cacheTime=300}}class E extends i{constructor(t){super(t),this.url="/v2/account/minis",this.isAuthenticated=!0,this.cacheTime=300}}class A extends i{constructor(t){super(t),this.url="/v2/account/mounts/skins",this.isAuthenticated=!0,this.cacheTime=300}}class _ extends i{constructor(t){super(t),this.url="/v2/account/mounts/types",this.isAuthenticated=!0,this.cacheTime=300}}class B extends i{constructor(t){super(t),this.url="/v2/account/novelties",this.isAuthenticated=!0,this.cacheTime=300}}class L extends i{constructor(t){super(t),this.url="/v2/account/outfits",this.isAuthenticated=!0,this.cacheTime=300}}class S extends i{constructor(t){super(t),this.url="/v2/account/raids",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await async function(t){const e=await new u(t).schema("2019-03-26").get();return new Date(e.last_modified)<o.getLastWeeklyReset()}(this)?[]:super.get()}}class M extends i{constructor(t){super(t),this.url="/v2/account/recipes",this.isAuthenticated=!0,this.cacheTime=300}}class z extends i{constructor(t){super(t),this.url="/v2/account/skins",this.isAuthenticated=!0,this.cacheTime=300}}class C extends i{constructor(t){super(t),this.url="/v2/account/titles",this.isAuthenticated=!0,this.cacheTime=300}}class I extends i{constructor(t){super(t),this.url="/v2/account/wallet",this.isAuthenticated=!0,this.cacheTime=300}}class j extends i{constructor(t){super(t),this.url="/v2/account/worldbosses",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await q(this)?[]:super.get()}}async function q(t){const e=await new u(t).schema("2019-03-26").get();return new Date(e.last_modified)<o.getLastDailyReset()}t.exports=u},function(t,e,s){"use strict";var i,n=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}e.stringify=function(t,e){e=e||"";var s,r,c=[];for(r in"string"!=typeof e&&(e="?"),t)if(n.call(t,r)){if((s=t[r])||null!==s&&s!==i&&!isNaN(s)||(s=""),r=encodeURIComponent(r),s=encodeURIComponent(s),null===r||null===s)continue;c.push(r+"="+s)}return c.length?e+c.join("&"):""},e.parse=function(t){for(var e,s=/([^=?&]+)=?([^&]*)/g,i={};e=s.exec(t);){var n=r(e[1]),c=r(e[2]);null===n||null===c||n in i||(i[n]=c)}return i}},function(t,e,s){"use strict";
/*!
 * array-unique <https://github.com/jonschlinkert/array-unique>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */t.exports=function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var e=t.length,s=-1;s++<e;)for(var i=s+1;i<t.length;++i)t[s]===t[i]&&t.splice(i--,1);return t},t.exports.immutable=function(e){if(!Array.isArray(e))throw new TypeError("array-unique expects an array.");for(var s=e.length,i=new Array(s),n=0;n<s;n++)i[n]=e[n];return t.exports(i)}},function(t,e,s){"use strict";(function(){function s(t,e){var s=[];e=parseInt(e)||2;for(var i=0;i<Math.ceil(t.length/e);i++){var n=i*e,r=n+e;s.push(t.slice(n,r))}return s}t.exports&&(e=t.exports=s),e.chunk=s}).call(this)},function(t,e,s){const i=s(19).default;let n={};t.exports=function(t){return n[t]||(n[t]=i(t)),n[t]}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e,s=t.length,i=s^s,n=0;s>=4;)e=1540483477*(65535&(e=255&t.charCodeAt(n)|(255&t.charCodeAt(++n))<<8|(255&t.charCodeAt(++n))<<16|(255&t.charCodeAt(++n))<<24))+((1540483477*(e>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),s-=4,++n;switch(s){case 3:i^=(255&t.charCodeAt(n+2))<<16;case 2:i^=(255&t.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(n)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),((i^=i>>>15)>>>0).toString(36)}},function(t,e,s){const i=s(21),n=s(6);function r(t){return()=>new Promise((e,s)=>{t().then(t=>e(t)).catch(t=>{let n=i(t,"response.status"),r=i(t,"content.text");if(n||r)return console.warn(`API error: ${r} (${n})`),e(null);s(t)})})}function c(t,e,s){const i=e.split(".");let n=t;i.forEach((t,e)=>{n[t]||(n[t]={}),e!==i.length-1?n=n[t]:n[t]=s})}t.exports=function(t){const e=t.client,s={account:r(()=>e.account().get()),achievements:r(()=>e.account().achievements().get()),bank:r(()=>e.account().bank().get()),characters:r(()=>e.characters().all()),"commerce.buys":r(()=>e.commerce().transactions().current().buys().all()),"commerce.sells":r(()=>e.commerce().transactions().current().sells().all()),"commerce.delivery":r(()=>e.commerce().delivery().get()),dungeons:r(()=>e.account().dungeons().get()),dyes:r(()=>e.account().dyes().get()),gliders:r(()=>e.account().gliders().get()),finishers:r(()=>e.account().finishers().get()),"home.cats":r(()=>e.account().home().cats().get()),"home.nodes":r(()=>e.account().home().nodes().get()),guilds:r(()=>(function(t){return t.account().get().then(e=>{if(!e.guild_leader)return[];let s=e.guild_leader.map(e=>r(()=>(function(e){let s={data:r(()=>t.guild().get(e)),members:r(()=>t.guild(e).members().get()),ranks:r(()=>t.guild(e).ranks().get()),stash:r(()=>t.guild(e).stash().get()),teams:r(()=>Promise.resolve(null)),treasury:r(()=>t.guild(e).treasury().get()),upgrades:r(()=>t.guild(e).upgrades().get())};return n.parallel(s)})(e)));return n.parallel(s)})})(e)),luck:r(()=>e.account().luck().get()),mailcarriers:r(()=>e.account().mailcarriers().get()),masteries:r(()=>e.account().masteries().get()),"mastery.points":r(()=>e.account().mastery().points().get()),materials:r(()=>e.account().materials().get()),minis:r(()=>e.account().minis().get()),"mounts.skins":r(()=>e.account().mounts().skins().get()),"mounts.types":r(()=>e.account().mounts().types().get()),novelties:r(()=>e.account().novelties().get()),outfits:r(()=>e.account().outfits().get()),"pvp.games":r(()=>e.account().pvp().games().all()),"pvp.heroes":r(()=>e.account().pvp().heroes().get()),"pvp.standings":r(()=>e.account().pvp().standings().get()),"pvp.stats":r(()=>e.account().pvp().stats().get()),raids:r(()=>e.account().raids().get()),recipes:r(()=>e.account().recipes().get()),shared:r(()=>e.account().inventory().get()),skins:r(()=>e.account().skins().get()),titles:r(()=>e.account().titles().get()),wallet:r(()=>e.account().wallet().get())};return n.parallel(s).then(t=>((t=function(t){let e={};for(let s in t)c(e,s,t[s]);return e}(t)).characters=function(t){if(!t)return null;return t.filter(t=>!t.flags||!t.flags.includes("Beta"))}(t.characters),t))},t.exports.wrap=r},function(t,e){const s=/]|^\[/g,i=/\.?\[/g;t.exports=function(t,e,n){if(!t||Object(t)!==t)return n;return function(t,e,s){let i=t;for(const t of e)if(null==(i=i[t]))return s;return i}(t,Array.isArray(e)?e:e.replace(s,"").replace(i,".").split("."),n)}},function(t,e){const s=864e5;function i(t,e){return new Date(t.toISOString().replace(/T.*Z/,`T${e}.000Z`))}function n(t){return t=t?new Date(t):new Date,i(t=new Date(t.getTime()+s),"00:00:00")}function r(t){const e=(t=t?new Date(t):new Date).getUTCDay(),n=t.getUTCHours(),r=t.getUTCMinutes();let c=0;switch(e){case 0:c=1;break;case 1:c=n>7||7===n&&r>=30?7:0;break;default:c=8-e}return i(t=new Date(t.getTime()+c*s),"07:30:00")}t.exports={getDateAtTime:i,getDailyReset:n,getLastDailyReset:function(t){return new Date(n(t).getTime()-s)},getWeeklyReset:r,getLastWeeklyReset:function(t){return new Date(r(t).getTime()-7*s)}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/achievements",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isLocalized=!0,this.cacheTime=86400}categories(){return new n(this)}groups(){return new r(this)}daily(){return new c(this)}dailyTomorrow(){return new a(this)}};class n extends i{constructor(t){super(t),this.url="/v2/achievements/categories",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class r extends i{constructor(t){super(t),this.url="/v2/achievements/groups",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class c extends i{constructor(t){super(t),this.url="/v2/achievements/daily",this.cacheTime=3600}}class a extends i{constructor(t){super(t),this.url="/v2/achievements/daily/tomorrow",this.cacheTime=3600}}},function(t,e,s){const i=s(0);t.exports=class extends i{answers(){return new n(this)}questions(){return new r(this)}};class n extends i{constructor(t){super(t),this.url="/v2/backstory/answers",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!0,this.isLocalized=!0,this.cacheTime=86400}}class r extends i{constructor(t){super(t),this.url="/v2/backstory/questions",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/build",this.cacheTime=60}get(){return super.get().then(t=>t.id)}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/cats",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/colors",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/continents",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}floors(t){return new n(this,t)}};class n extends i{constructor(t,e){super(t),this.url=`/v2/continents/${e}/floors`,this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/currencies",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/dailycrafting",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/dungeons",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{backgrounds(){return new n(this,"backgrounds")}foregrounds(){return new n(this,"foregrounds")}};class n extends i{constructor(t,e){super(t),this.url=`/v2/emblem/${e}`,this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);function n(t){let e=t.events,s=[];const i=Object.keys(e);for(let t=0;t!==i.length;t++)s.push(Object.assign({id:i[t]},e[i[t]]));return s}t.exports=class extends i{constructor(t){super(t),this.url="/v1/event_details.json",this.cacheTime=86400}all(){return super.get().then(n)}get(t){return super.get(`?event_id=${t}`,!0).then(t=>n(t)[0])}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/files",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/finishers",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/gliders",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t,e){super(t),this.id=e,this.url="/v2/guild",this.isAuthenticated=!0,this.isOptionallyAuthenticated=!0,this.cacheTime=3600}get(t){return super.get(`/${t}`,!0)}permissions(){return new n(this)}search(t){return new r(this,t)}upgrades(){return void 0===this.id?new c(this):new m(this,this.id)}log(){return new a(this,this.id)}members(){return new o(this,this.id)}ranks(){return new u(this,this.id)}stash(){return new h(this,this.id)}storage(){return new l(this,this.id)}teams(){return new d(this,this.id)}treasury(){return new p(this,this.id)}};class n extends i{constructor(t){super(t),this.url="/v2/guild/permissions",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class r extends i{constructor(t){super(t),this.url="/v2/guild/search",this.cacheTime=3600}name(t){return super.get(`?name=${encodeURIComponent(t)}`,!0).then(t=>t[0])}}class c extends i{constructor(t){super(t),this.url="/v2/guild/upgrades",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class a extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/log`,this.isAuthenticated=!0,this.cacheTime=300}since(t){return super.get(`?since=${t}`,!0)}}class o extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/members`,this.isAuthenticated=!0,this.cacheTime=300}}class u extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/ranks`,this.isAuthenticated=!0,this.cacheTime=300}}class h extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/stash`,this.isAuthenticated=!0,this.cacheTime=300}}class l extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/storage`,this.isAuthenticated=!0,this.cacheTime=300}}class d extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/teams`,this.isAuthenticated=!0,this.cacheTime=300}}class p extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/treasury`,this.isAuthenticated=!0,this.cacheTime=300}}class m extends i{constructor(t,e){super(t),this.url=`/v2/guild/${encodeURIComponent(e)}/upgrades`,this.isAuthenticated=!0,this.cacheTime=300}}},function(t,e,s){const i=s(0);t.exports=class extends i{cats(){return new n(this)}nodes(){return new r(this)}};class n extends i{constructor(t){super(t),this.url="/v2/home/cats",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}class r extends i{constructor(t){super(t),this.url="/v2/home/nodes",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/items",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/itemstats",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/legends",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/mailcarriers",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/mapchests",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/maps",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/masteries",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/materials",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/minis",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{skins(){return new n(this)}types(){return new r(this)}};class n extends i{constructor(t){super(t),this.url="/v2/mounts/skins",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class r extends i{constructor(t){super(t),this.url="/v2/mounts/types",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/nodes",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/novelties",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/outfits",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/pets",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/professions",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/quaggans",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/quests",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/races",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/raids",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/recipes",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.cacheTime=86400}search(){return new n(this)}};class n extends i{constructor(t){super(t),this.url="/v2/recipes/search",this.cacheTime=86400}input(t){return super.get(`?input=${t}`,!0)}output(t){return super.get(`?output=${t}`,!0)}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/skills",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/skins",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/specializations",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/stories",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}seasons(){return new n(this)}};class n extends i{constructor(t){super(t),this.url="/v2/stories/seasons",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/titles",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/tokeninfo",this.isAuthenticated=!0,this.cacheTime=60}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/traits",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/worldbosses",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{constructor(t){super(t),this.url="/v2/worlds",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){const i=s(0);t.exports=class extends i{abilities(){return new n(this)}matches(){return new r(this)}objectives(){return new l(this)}upgrades(){return new d(this)}ranks(){return new p(this)}};class n extends i{constructor(t){super(t),this.url="/v2/wvw/abilities",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class r extends i{constructor(t){super(t),this.url="/v2/wvw/matches",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get(`?world=${t}`,!0)}overview(){return new o(this)}scores(){return new u(this)}stats(t){return new h(this,t)}}class c extends i{constructor(t,e,s){super(t),this.team=s,this.id=e,this.url=`/v2/wvw/matches/stats/${e}/teams`}top(t){return new a(this,this.id,this.team,t)}}class a extends i{constructor(t,e,s,i){super(t),this.which=i,this.url=`/v2/wvw/matches/stats/${e}/teams/${s}/top/${i}`}}class o extends i{constructor(t){super(t),this.url="/v2/wvw/matches/overview",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get(`?world=${t}`,!0)}}class u extends i{constructor(t){super(t),this.url="/v2/wvw/matches/scores",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get(`?world=${t}`,!0)}}class h extends i{constructor(t,e){super(t),this.id=e,this.url="/v2/wvw/matches/stats",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get(`?world=${t}`,!0)}teams(t){return new c(this,this.id,t)}}class l extends i{constructor(t){super(t),this.url="/v2/wvw/objectives",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class d extends i{constructor(t){super(t),this.url="/v2/wvw/upgrades",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class p extends i{constructor(t){super(t),this.url="/v2/wvw/ranks",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}},function(t,e,s){"use strict";s.r(e);var i=s(1);const n=[1725,1723,1721,1722,1714,1718,1719,1724],r={1725:5,1723:9,1721:11,1722:10,1714:13,1718:12,1719:14,1724:6},c={Helm:180,Shoulders:210,Coat:330,Gloves:180,Leggings:300,Boots:180,Axe:300,Dagger:300,Focus:210,Greatsword:390,Hammer:390,Spear:390,Longbow:390,Mace:300,Pistol:300,Rifle:390,Scepter:210,Shield:210,Shortbow:390,Speargun:390,Staff:390,Sword:300,Torch:210,Trident:390,Warhorn:210};e.default=class extends i.a{get commandName(){return"dungeon-collection"}async _execute(){this._terminal.writeLine("<span style='color:yellow;'>This command will search your account for the dungeon collection skins and outputs the amount of unlocked skins, the amount of required tokens and the amount of tokens still left to collect in order to complete the collection. Please wait...</span>"),this._terminal.writeLine();const[t,e,s]=await Promise.all([this._api.achievements().many(n),this._api.account().achievements().many(n),this._api.account().wallet().get()]),i=t.map(t=>t.bits.map(t=>t.id)),a=new Map((await Promise.all(i.map(t=>this._api.skins().many(t)))).flat().map(t=>[t.id,t]));let o="";for(let i of t){const t=e.find(t=>t.id===i.id),n=t?t.done?i.bits.map(t=>t.id):t.bits.map(t=>i.bits[t].id):[],u=i.bits.filter(t=>-1===n.indexOf(t.id)).map(t=>t.id),h=n.map(t=>c[a.get(t).details.type]).reduce((t,e)=>t+e),l=u.map(t=>c[a.get(t).details.type]).reduce((t,e)=>t+e),d=s.find(t=>t.id===r[i.id]).value;o+=`${i.name}:\n`,o+=` - Unlocked skins: ${n.length}/${n.length+u.length}\n`,o+=` - Tokens required: ${l.toLocaleString()} (${h.toLocaleString()}/${(h+l).toLocaleString()})\n`,o+=` - Tokens to collect: ${(l<d?0:l-d).toLocaleString()} (${d.toLocaleString()}/${l.toLocaleString()})\n`,o+="\n"}return o}}},function(t,e,s){"use strict";s.r(e);var i=s(1);Set.prototype.difference=function(t){var e=new Set(this);for(let s of t)e.delete(s);return e},e.default=class extends i.a{get commandName(){return"mastery-point-achievements"}async _execute(){this._terminal.writeLine("<span style='color:yellow;'>This command will verify your account for all locked and unlocked mastery points. Please wait...</span>"),this._terminal.writeLine();const t=await this._api.achievements().all(),e=new Map,s=new Map;for(let i of t){const t=i.rewards?i.rewards.find(t=>"Mastery"===t.type):null;t&&(s.has(t.id)||s.set(t.id,[]),e.has(t.region)||e.set(t.region,[]),e.get(t.region).push(i),s.get(t.id).push(i))}const[i,n]=await Promise.all([this._api.account().achievements().get(),this._api.account().mastery().points().get()]),r=n.unlocked,c=Array.from(new Set(s.keys()).difference(new Set(n.unlocked))).sort(),a=r.filter(t=>{const e=i.find(e=>s.has(t)&&s.get(t).find(t=>t.id===e.id));return!e||!e.done}),o=c.filter(t=>{const e=i.find(e=>s.has(t)&&s.get(t).find(t=>t.id===e.id));return e&&e.done});let u="";u+="Unlocked incorrectly:\n";for(let t of a){const e=s.get(t);u+=e?` - ${t} -> ${e.map(t=>`${t.name} (${t.id})`).join(", ")}\n`:` - ${t} -> unknown achievement\n`}u+="\n",u+="Locked incorrectly:\n";for(let t of o){const e=s.get(t);u+=e?` - ${t} -> ${e.map(t=>`${t.name} (${t.id})`).join(", ")}\n`:` - ${t} -> unknown achievement\n`}return`${u}\n`}}},function(t,e,s){"use strict";s.r(e);var i=s(1);const n=[2875,2880,2860,2867,3393],r={2875:[46515,46533,46521,41925,46536,41940,46512,46527,46530,41928,41934,41937,41931,41922,46524,46518,46540,46546,46542,41946,46547,41949,46539,46544,46545,41952,41955,41958,41961,41964,46543,46541],2880:[46551,46569,46557,46575,46572,46578,46548,46563,46566,46581,46584,46587,46590,46593,46560,46554],2860:[46599,46617,46605,46623,46620,46626,46596,46611,46614,46629,46632,46635,46638,46641,46608,46602],2867:[78105,78045,78029,78068,78024,78087,78110,78073,78022,78066,78060,78102,78053,78106,78037,78059,78081,78100,78051,78104,78048,78082,78020,78014,78013,78021,78098,78056,78077,78064,78047,78113,78023,78035,78083,78032,78070,78107,78099,78063,78112,78075,78092,78093,78067,78017,78055,78091,78050,78015,78078,78080,78103,78101,78072,78061,78033,78042,78040,78111,78096,78026,78109,78044],3393:[80959,80968,80870,80921,80894,80933,80931,80896,80940,80876,80937,80905,80963,80912,80950,80867]},c={2867:[78039,78071,78049,78058]},a={3393:80890},o={3393:{Axe:12,Dagger:12,Focus:8,Greatsword:16,Hammer:16,Longbow:16,Mace:12,Pistol:12,Rifle:16,Scepter:12,Shield:8,Shortbow:16,Staff:16,Sword:12,Torch:8,Warhorn:8}},u={80890:[{id:80862,count:1,dayLimit:1},{id:78039,count:8,dayLimit:8}]};e.default=class extends i.a{get commandName(){return"sab-collections"}async _execute(){this._terminal.writeLine("<span style='color:yellow;'>This command will search your account for all SAB related skin collections, and outputs the result. Please wait...</span>"),this._terminal.writeLine();const[t,e,s,i,h]=await Promise.all([this._api.achievements().many(n),this._api.account().achievements().many(n),this._api.items().many(Object.values(r).concat(Object.values(c),Object.values(a),[].concat.apply([],Object.values(u)).map(t=>t.id)).flat()),this._api.account().bank().get(),this._api.characters().all()]),l=new Map(s.map(t=>[t.id,t])),d=new Map(t.map(t=>[t.id,t.bits.map(t=>t.id)])),p=new Map(s.map(t=>{switch(t.type){case"Consumable":return[t.id,t.details.skins];case"Weapon":return[t.id,[t.default_skin]]}}).filter(t=>t));for(let t of Object.keys(c)){t=parseInt(t,10);for(const e of c[t])p.set(e,d.get(t))}for(let t of Object.keys(a))t=parseInt(t,10),p.set(a[t],null);const m=new Map;for(const[t,e]of p)if(e)for(const s of e)m.has(s)||m.set(s,[]),m.get(s).push(t);const g=new Map,f=(t,e,s)=>{g.has(t)||g.set(t,[]),g.get(t).push({count:e,description:s})};for(const t of h){for(const e of t.equipment.filter(t=>t))p.has(e.id)&&f(e.id,1,`${t.name} - Equipped as ${e.slot}`);for(const e of t.bags.filter(t=>t))for(const s of e.inventory.filter(t=>t))p.has(s.id)&&f(s.id,s.count,`${t.name} - Inventory`)}for(const t of i.filter(t=>t))p.has(t.id)&&f(t.id,t.count,"Bank");let w="";for(const s of t){const t=e.find(t=>t.id===s.id),i=t?t.done?s.bits.map(t=>t.id):t.bits.map(t=>s.bits[t].id):[],n=s.bits.filter(t=>-1===i.indexOf(t.id)).map(t=>t.id);let h=void 0;o[s.id]&&(h=Object.values(o[s.id]).reduce((t,e)=>t+e,0));const d=(t,e)=>{const s=[];let i=0;if(t)for(const n of t)if(g.has(n))for(const t of g.get(n)){const r=l.get(n)?l.get(n).name:`((unknown:${n}))`;s.push(`${e}- ${r}: ${t.description} (x${t.count})`),i+=t.count}return[s,i]},p=t=>d(t[s.id],"&nbsp;")[0],m=t=>d([t[s.id]],"&nbsp;"),f=p(r),v=p(c),[y,x]=m(a);if(w+=`${s.name}:\n`,w+=`&nbsp;- Unlocked skins: ${i.length}/${i.length+n.length}\n`,f.length>0&&(w+=`${f.join("\n")}\n`),v.length>0&&(w+=`${v.join("\n")}\n`),y.length>0&&(w+=`${y.join("\n")}\n`),void 0!==h){const t=l.get(a[s.id])?l.get(a[s.id]).name:`((unknown:${a[s.id]}))`,e=u[a[s.id]],i=e.reduce((t,e)=>t+(e.count/e.dayLimit||0),0);w+=`&nbsp;- ${i}x ${t} per day:\n`;for(let t of e)w+=`&nbsp;&nbsp;&nbsp;- ${l.get(t.id).name}: ${t.count}x per ${t.dayLimit} day(s)\n`;w+="&nbsp;- Without unopened containers:\n",w+=`&nbsp;&nbsp;&nbsp;- Tokens obtained: ${x}/${h}x ${t}\n`;const n=h-x;w+=`&nbsp;&nbsp;&nbsp;- Tokens to collect: ${n<0?0:n}x ${t}\n`,n>0&&(w+=`&nbsp;&nbsp;&nbsp;- Days remaining: ${n/i} (does not take achievement gating into account)\n`),w+="&nbsp;- With unopened containers:\n";let r="",c=x;for(let t of e){const[e,s]=d([t.id],"&nbsp;&nbsp;&nbsp;");c+=s*t.count,e.length>0&&(r+=`${e.join("\n")}\n`)}w+=r,w+=`&nbsp;&nbsp;&nbsp;- Tokens obtained: ${c}/${h}x ${t}\n`;const o=h-c;w+=`&nbsp;&nbsp;&nbsp;- Tokens to collect: ${o<0?0:o}x ${t}\n`,o>0&&(w+=`&nbsp;&nbsp;&nbsp;- Days remaining: ${o/i} (does not take achievement gating into account)\n`)}w+="\n"}return w}}},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s.n(i),r=s(7),c=s.n(r),a=[s(69).default,s(70).default,s(71).default];const o=n()(),u={get apiKey(){return localStorage.getItem("apiKey")},set apiKey(t){localStorage.setItem("apiKey",t),o.authenticate(t)}};u.apiKey&&o.authenticate(u.apiKey);const h=new c.a("terminal",{welcome:"Guild Wars 2 Console - For command information, type 'help'.",prompt:"GW2"},{execute:async function(t,e){try{if(l[t]){let s=l[t](...e);return s.then&&(s=await s),s=s.replace(/\n/g,"<br />")}return!1}catch(t){return console.log(t),`<span style='color:red;'>${t}</span>`}}});const l={clear:function(){return h.clear(),""},help:function(){return`Available commands: ${Object.keys(l).sort().join(", ")}.`},github:function(){return"The GitHub repository can be found at <a href='https://github.com/Archomeda/gw2-console' target='_blank'>github.com/Archomeda/gw2-console</a>."},apikey:async function(t){if(t){h.writeLine("<span style='color:yellow;'>Testing API key, hang on tight...</span>");const e=n()().authenticate(t),s=await async function(t){try{return await t}catch(t){throw t.content?t.content.text?`Error ${t.response.status}: ${t.content.text}.`:`Error ${t.response.status}`:t}}(e.account().get());return"string"==typeof s?`Invalid API key: ${s}`:(u.apiKey=t,`Hello ${s.name}! Your API key is set to '${t}'.`)}return u.apiKey?`Your API key is currently set to '${u.apiKey}'.`:"You have no API key set. You can set one with 'apikey &lt;key&gt;'. This API key will be saved to your browser local storage."}};for(const t of a){const e=new t;e.initialize(h,o),l[e.commandName]=e.execute.bind(e)}}]);
//# sourceMappingURL=bundle.js.map